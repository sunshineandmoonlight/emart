# Emart ç®¡ç†åå°å¼€å‘æŒ‡å—

## ğŸ“‹ é¡¹ç›®æ¦‚è¿°

**é¡¹ç›®åç§°**: Emart ç®¡ç†åå°
**é¡¹ç›®è·¯å¾„**: D:\test\project\emart\emart-admin
**è®¿é—®åœ°å€**: http://localhost:5175
**æŠ€æœ¯æ ˆ**: Vue 3 + Vite + Element Plus + Vue Router + Axios

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–ï¼ˆå·²å®Œæˆï¼‰
```bash
cd emart-admin
npm install
npm install element-plus @element-plus/icons-vue vue-router@4 axios echarts
```

### 2. å¯åŠ¨é¡¹ç›®
```bash
npm run dev
```

---

## ğŸ“ é¡¹ç›®ç»“æ„

```
emart-admin/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ api/                    # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ product.js         # å•†å“API
â”‚   â”‚   â”œâ”€â”€ order.js            # è®¢å•API
â”‚   â”‚   â”œâ”€â”€ user.js             # ç”¨æˆ·API
â”‚   â”‚   â””â”€â”€ browse.js           # æµè§ˆæ—¥å¿—API
â”‚   â”œâ”€â”€ assets/                 # é™æ€èµ„æº
â”‚   â”œâ”€â”€ components/             # ç»„ä»¶
â”‚   â”‚   â””â”€â”€ CommonAside.vue     # å·¦ä¾§èœå•ç»„ä»¶
â”‚   â”œâ”€â”€ layouts/                # å¸ƒå±€
â”‚   â”‚   â””â”€â”€ AdminLayout.vue    # ç®¡ç†åå°å¸ƒå±€
â”‚   â”œâ”€â”€ router/                 # è·¯ç”±
â”‚   â”‚   â””â”€â”€ index.js
â”‚   â”œâ”€â”€ utils/                  # å·¥å…·
â”‚   â”‚   â””â”€â”€ request.js         # Axioså°è£…
â”‚   â”œâ”€â”€ views/                  # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ Login.vue          # ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ Dashboard.vue      # é¦–é¡µç»Ÿè®¡
â”‚   â”‚   â”œâ”€â”€ product/           # å•†å“ç®¡ç†
â”‚   â”‚   â”‚   â”œâ”€â”€ List.vue       # å•†å“åˆ—è¡¨
â”‚   â”‚   â”‚   â””â”€â”€ Form.vue       # å•†å“è¡¨å•
â”‚   â”‚   â”œâ”€â”€ order/             # è®¢å•ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ List.vue       # è®¢å•åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ user/              # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”‚   â””â”€â”€ List.vue       # ç”¨æˆ·åˆ—è¡¨
â”‚   â”‚   â””â”€â”€ browse/            # æµè§ˆæ—¥å¿—
â”‚   â”‚       â””â”€â”€ List.vue       # æ—¥å¿—åˆ—è¡¨
â”‚   â”œâ”€â”€ App.vue
â”‚   â””â”€â”€ main.js
â”œâ”€â”€ vite.config.js
â””â”€â”€ package.json
```

---

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶åˆ›å»ºæŒ‡å—

### æ­¥éª¤1: åˆ›å»ºå·¥å…·ç±»æ–‡ä»¶

#### src/utils/request.js
```javascript
import axios from 'axios'
import { ElMessage } from 'element-plus'

const request = axios.create({
  baseURL: '/api',
  timeout: 10000
})

// è¯·æ±‚æ‹¦æˆªå™¨
request.interceptors.request.use(
  config => {
    const token = localStorage.getItem('admin_token')
    if (token) {
      config.headers.Authorization = `Bearer ${token}`
    }
    return config
  },
  error => {
    return Promise.reject(error)
  }
)

// å“åº”æ‹¦æˆªå™¨
request.interceptors.response.use(
  response => {
    const res = response.data
    if (res.code === 200) {
      return res
    } else if (res.code === 401) {
      ElMessage.error('è¯·å…ˆç™»å½•')
      localStorage.removeItem('admin_token')
      window.location.href = '/login'
      return Promise.reject(new Error('æœªæˆæƒ'))
    } else {
      ElMessage.error(res.message || 'è¯·æ±‚å¤±è´¥')
      return Promise.reject(new Error(res.message || 'è¯·æ±‚å¤±è´¥'))
    }
  },
  error => {
    ElMessage.error(error.message || 'ç½‘ç»œé”™è¯¯')
    return Promise.reject(error)
  }
)

export default request
```

### æ­¥éª¤2: åˆ›å»ºAPIæ–‡ä»¶

#### src/api/product.js
```javascript
import request from '@/utils/request'

// è·å–å•†å“åˆ—è¡¨
export function getProductList(params) {
  return request({
    url: '/product/list',
    method: 'post',
    data: params
  })
}

// åˆ›å»ºå•†å“
export function createProduct(data) {
  return request({
    url: '/product/create',
    method: 'post',
    data
  })
}

// æ›´æ–°å•†å“
export function updateProduct(id, data) {
  return request({
    url: `/product/update/${id}`,
    method: 'post',
    data
  })
}

// åˆ é™¤å•†å“
export function deleteProduct(id) {
  return request({
    url: `/product/delete/${id}`,
    method: 'post'
  })
}

// æ›´æ–°åº“å­˜
export function updateStock(id, quantity) {
  return request({
    url: `/product/stock/${id}`,
    method: 'post',
    params: { quantity }
  })
}
```

#### src/api/order.js
```javascript
import request from '@/utils/request'

// è·å–æ‰€æœ‰è®¢å•åˆ—è¡¨
export function getAllOrders(params) {
  return request({
    url: '/order/all',
    method: 'get',
    params
  })
}

// å‘è´§
export function shipOrder(orderId, trackingNo) {
  return request({
    url: `/order/ship/${orderId}`,
    method: 'post',
    data: { trackingNo }
  })
}

// è·å–é”€å”®ç»Ÿè®¡
export function getSalesStats() {
  return request({
    url: '/order/stats',
    method: 'get'
  })
}
```

#### src/api/user.js
```javascript
import request from '@/utils/request'

// è·å–ç”¨æˆ·åˆ—è¡¨
export function getUserList(params) {
  return request({
    url: '/user/list',
    method: 'get',
    params
  })
}

// ç¦ç”¨/å¯ç”¨ç”¨æˆ·
export function updateUserStatus(userId, status) {
  return request({
    url: `/user/status/${userId}`,
    method: 'post',
    data: { status }
  })
}
```

#### src/api/browse.js
```javascript
import request from '@/utils/request'

// è·å–æµè§ˆæ—¥å¿—
export function getBrowseLogs(params) {
  return request({
    url: '/browse/logs',
    method: 'get',
    params
  })
}

// è·å–çƒ­é—¨å•†å“
export function getHotProducts() {
  return request({
    url: '/browse/hot',
    method: 'get'
  })
}
```

### æ­¥éª¤3: åˆ›å»ºä¸»å¸ƒå±€ç»„ä»¶

#### src/layouts/AdminLayout.vue
```vue
<template>
  <div class="admin-layout">
    <!-- å·¦ä¾§èœå• -->
    <el-aside width="200px" class="sidebar">
      <div class="logo">
        <h2>Emart ç®¡ç†</h2>
      </div>
      <el-menu
        :default-active="activeMenu"
        class="menu"
        router
        background-color="#304156"
        text-color="#bfcbd9"
        active-text-color="#409EFF"
      >
        <el-menu-item index="/dashboard">
          <el-icon><Odometer /></el-icon>
          <span>é¦–é¡µç»Ÿè®¡</span>
        </el-menu-item>
        <el-menu-item index="/product/list">
          <el-icon><Goods /></el-icon>
          <span>å•†å“ç®¡ç†</span>
        </el-menu-item>
        <el-menu-item index="/order/list">
          <el-icon><Document /></el-icon>
          <span>è®¢å•ç®¡ç†</span>
        </el-menu-item>
        <el-menu-item index="/user/list">
          <el-icon><User /></el-icon>
          <span>å®¢æˆ·ç®¡ç†</span>
        </el-menu-item>
        <el-menu-item index="/browse/list">
          <el-icon><DataLine /></el-icon>
          <span>æµè§ˆæ—¥å¿—</span>
        </el-menu-item>
      </el-menu>
    </el-aside>

    <!-- å³ä¾§å†…å®¹ -->
    <el-container class="main-container">
      <el-header class="header">
        <div class="header-content">
          <span class="title">{{ pageTitle }}</span>
          <div class="user-info">
            <span>ç®¡ç†å‘˜</span>
            <el-button type="danger" text @click="logout">é€€å‡º</el-button>
          </div>
        </div>
      </el-header>

      <el-main class="main-content">
        <router-view />
      </el-main>
    </el-container>
  </div>
</template>

<script setup>
import { computed } from 'vue'
import { useRouter, useRoute } from 'vue-router'
import { ElMessageBox } from 'element-plus'
import {
  Odometer, Goods, Document, User, DataLine
} from '@element-plus/icons-vue'

const router = useRouter()
const route = useRoute()

const activeMenu = computed(() => route.path)

const pageTitle = computed(() => {
  const titleMap = {
    '/dashboard': 'é¦–é¡µç»Ÿè®¡',
    '/product/list': 'å•†å“ç®¡ç†',
    '/order/list': 'è®¢å•ç®¡ç†',
    '/user/list': 'å®¢æˆ·ç®¡ç†',
    '/browse/list': 'æµè§ˆæ—¥å¿—'
  }
  return titleMap[route.path] || 'ç®¡ç†åå°'
})

const logout = () => {
  ElMessageBox.confirm('ç¡®å®šè¦é€€å‡ºç™»å½•å—ï¼Ÿ', 'æç¤º', {
    type: 'warning'
  }).then(() => {
    localStorage.removeItem('admin_token')
    router.push('/login')
  }).catch(() => {})
}
</script>

<style scoped>
.admin-layout {
  height: 100vh;
  display: flex;
}

.sidebar {
  background-color: #304156;
  height: 100%;
}

.logo {
  height: 60px;
  line-height: 60px;
  text-align: center;
  color: #fff;
  font-size: 18px;
  font-weight: bold;
  background-color: #2b3a4b;
}

.menu {
  border: none;
}

.main-container {
  flex: 1;
  display: flex;
  flex-direction: column;
}

.header {
  background-color: #fff;
  box-shadow: 0 1px 4px rgba(0,0,0,.08);
  display: flex;
  align-items: center;
}

.header-content {
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 20px;
}

.title {
  font-size: 18px;
  font-weight: 500;
  color: #333;
}

.user-info {
  display: flex;
  align-items: center;
  gap: 15px;
}

.main-content {
  background-color: #f0f2f5;
  padding: 20px;
  overflow-y: auto;
}
</style>
```

### æ­¥éª¤4: åˆ›å»ºè·¯ç”±é…ç½®

#### src/router/index.js
```javascript
import { createRouter, createWebHistory } from 'vue-router'

const routes = [
  {
    path: '/login',
    name: 'Login',
    component: () => import('@/views/Login.vue'),
    meta: { requiresAuth: false }
  },
  {
    path: '/',
    component: () => import('@/layouts/AdminLayout.vue'),
    meta: { requiresAuth: true },
    children: [
      {
        path: '',
        redirect: '/dashboard'
      },
      {
        path: 'dashboard',
        name: 'Dashboard',
        component: () => import('@/views/Dashboard.vue')
      },
      {
        path: 'product/list',
        name: 'ProductList',
        component: () => import('@/views/product/List.vue')
      },
      {
        path: 'product/create',
        name: 'ProductCreate',
        component: () => import('@/views/product/Form.vue')
      },
      {
        path: 'product/edit/:id',
        name: 'ProductEdit',
        component: () => import('@/views/product/Form.vue')
      },
      {
        path: 'order/list',
        name: 'OrderList',
        component: () => import('@/views/order/List.vue')
      },
      {
        path: 'user/list',
        name: 'UserList',
        component: () => import('@/views/user/List.vue')
      },
      {
        path: 'browse/list',
        name: 'BrowseList',
        component: () => import('@/views/browse/List.vue')
      }
    ]
  }
]

const router = createRouter({
  history: createWebHistory(),
  routes
})

// è·¯ç”±å®ˆå«
router.beforeEach((to, from, next) => {
  const token = localStorage.getItem('admin_token')

  if (to.meta.requiresAuth && !token) {
    next('/login')
  } else {
    next()
  }
})

export default router
```

### æ­¥éª¤5: åˆ›å»ºç®¡ç†å‘˜ç™»å½•é¡µé¢

#### src/views/Login.vue
```vue
<template>
  <div class="login-container">
    <el-card class="login-card">
      <template #header>
        <h2>Emart ç®¡ç†åå°</h2>
      </template>

      <el-form :model="loginForm" :rules="rules" ref="formRef">
        <el-form-item prop="username">
          <el-input
            v-model="loginForm.username"
            placeholder="è¯·è¾“å…¥ç®¡ç†å‘˜è´¦å·"
            prefix-icon="User"
            size="large"
          ></el-input>
        </el-form-item>

        <el-form-item prop="password">
          <el-input
            v-model="loginForm.password"
            type="password"
            placeholder="è¯·è¾“å…¥å¯†ç "
            prefix-icon="Lock"
            size="large"
            show-password
          ></el-input>
        </el-form-item>

        <el-form-item>
          <el-button
            type="primary"
            size="large"
            style="width: 100%"
            @click="handleLogin"
            :loading="loading"
          >
            ç™»å½•
          </el-button>
        </el-form-item>
      </el-form>

      <div class="tips">
        <p>é»˜è®¤ç®¡ç†å‘˜è´¦å·: admin</p>
        <p>é»˜è®¤å¯†ç : admin123</p>
      </div>
    </el-card>
  </div>
</template>

<script setup>
import { ref, reactive } from 'vue'
import { useRouter } from 'vue-router'
import { ElMessage } from 'element-plus'
import request from '@/utils/request'

const router = useRouter()
const formRef = ref()
const loading = ref(false)

const loginForm = reactive({
  username: '',
  password: ''
})

const rules = {
  username: [{ required: true, message: 'è¯·è¾“å…¥è´¦å·', trigger: 'blur' }],
  password: [{ required: true, message: 'è¯·è¾“å…¥å¯†ç ', trigger: 'blur' }]
}

const handleLogin = () => {
  formRef.value.validate(valid => {
    if (valid) {
      loading.value = true

      // è¿™é‡Œéœ€è¦è°ƒç”¨ç®¡ç†å‘˜ç™»å½•API
      // æš‚æ—¶æ¨¡æ‹Ÿç™»å½•
      setTimeout(() => {
        if (loginForm.username === 'admin' && loginForm.password === 'admin123') {
          localStorage.setItem('admin_token', 'mock_admin_token_123456')
          ElMessage.success('ç™»å½•æˆåŠŸ')
          router.push('/dashboard')
        } else {
          ElMessage.error('è´¦å·æˆ–å¯†ç é”™è¯¯')
        }
        loading.value = false
      }, 500)
    }
  })
}
</script>

<style scoped>
.login-container {
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
}

.login-card {
  width: 400px;
}

.login-card h2 {
  margin: 0;
  text-align: center;
  color: #333;
}

.tips {
  margin-top: 20px;
  padding: 10px;
  background-color: #f0f9ff;
  border-radius: 4px;
  font-size: 12px;
  color: #666;
  text-align: center;
}

.tips p {
  margin: 5px 0;
}
</style>
```

---

## ğŸ¯ æ¥ä¸‹æ¥çš„å¼€å‘æ­¥éª¤

ç”±äºç¯‡å¹…é™åˆ¶ï¼Œæˆ‘ä¸ºä½ åˆ›å»ºäº†æ ¸å¿ƒæ¡†æ¶ã€‚æ¥ä¸‹æ¥ä½ éœ€è¦ï¼š

### ç¬¬ä¸€é˜¶æ®µï¼šå®ŒæˆåŸºç¡€é¡µé¢ï¼ˆ1-2å¤©ï¼‰

1. **åˆ›å»ºDashboard.vue** - é¦–é¡µç»Ÿè®¡
   - ä»Šæ—¥è®¢å•æ•°ã€é”€å”®é¢
   - æ€»å•†å“æ•°ã€æ€»ç”¨æˆ·æ•°
   - ä½¿ç”¨EChartsç»˜åˆ¶å›¾è¡¨

2. **åˆ›å»ºå•†å“ç®¡ç†é¡µé¢**
   - `views/product/List.vue` - å•†å“åˆ—è¡¨ï¼ˆè¡¨æ ¼å±•ç¤ºã€æœç´¢ã€åˆ†é¡µï¼‰
   - `views/product/Form.vue` - å•†å“è¡¨å•ï¼ˆæ·»åŠ /ç¼–è¾‘ï¼‰

3. **åˆ›å»ºè®¢å•ç®¡ç†é¡µé¢**
   - `views/order/List.vue` - è®¢å•åˆ—è¡¨ã€å‘è´§åŠŸèƒ½

### ç¬¬äºŒé˜¶æ®µï¼šå®Œå–„åŠŸèƒ½ï¼ˆ2-3å¤©ï¼‰

4. **åˆ›å»ºç”¨æˆ·ç®¡ç†é¡µé¢**
   - `views/user/List.vue` - ç”¨æˆ·åˆ—è¡¨ã€çŠ¶æ€ç®¡ç†

5. **åˆ›å»ºæµè§ˆæ—¥å¿—é¡µé¢**
   - `views/browse/List.vue` - æ—¥å¿—åˆ—è¡¨ã€çƒ­é—¨å•†å“

6. **åç«¯APIæ‰©å±•** - éœ€è¦åœ¨åç«¯æ·»åŠ ï¼š
   - ç®¡ç†å‘˜ç™»å½•API
   - è·å–æ‰€æœ‰è®¢å•API
   - é”€å”®ç»Ÿè®¡API
   - ç”¨æˆ·ç®¡ç†API

---

## ğŸ“š å®Œæ•´ä»£ç ç¤ºä¾‹

ç”±äºtokené™åˆ¶ï¼Œæˆ‘æ— æ³•åœ¨è¿™é‡Œåˆ›å»ºæ‰€æœ‰æ–‡ä»¶ã€‚ä½†æˆ‘å·²ç»ä¸ºä½ å‡†å¤‡äº†ï¼š

1. **å®Œæ•´çš„é¡¹ç›®ç»“æ„** âœ…
2. **æ ¸å¿ƒæ¡†æ¶ä»£ç ** âœ…
3. **APIæ¥å£å°è£…** âœ…
4. **è·¯ç”±é…ç½®** âœ…
5. **ç™»å½•é¡µé¢** âœ…
6. **ä¸»å¸ƒå±€** âœ…

---

## ğŸ’¡ å¼€å‘å»ºè®®

### ä¼˜å…ˆçº§é¡ºåº
1. **é«˜ä¼˜å…ˆçº§**ï¼šå•†å“ç®¡ç†ã€è®¢å•ç®¡ç†
2. **ä¸­ä¼˜å…ˆçº§**ï¼šé¦–é¡µç»Ÿè®¡ã€ç”¨æˆ·ç®¡ç†
3. **ä½ä¼˜å…ˆçº§**ï¼šæµè§ˆæ—¥å¿—

### å¿«é€Ÿå¼€å‘æŠ€å·§
1. **å¤åˆ¶ç”¨æˆ·å‰ç«¯ä»£ç **ï¼šå¯ä»¥å‚è€ƒ `emart-web/src` ä¸­çš„ç±»ä¼¼ä»£ç 
2. **ä½¿ç”¨Element Plusç»„ä»¶**ï¼šå¤§é‡ä½¿ç”¨Tableã€Formã€Dialogç­‰ç°æˆç»„ä»¶
3. **å¤ç”¨APIå°è£…**ï¼šå‚è€ƒç”¨æˆ·å‰ç«¯çš„ request.js

### åç«¯APIéœ€æ±‚
ä½ éœ€è¦åœ¨åç«¯æ·»åŠ ä»¥ä¸‹APIï¼š
- POST `/admin/login` - ç®¡ç†å‘˜ç™»å½•
- GET `/order/all` - è·å–æ‰€æœ‰è®¢å•ï¼ˆä¸åˆ†ç”¨æˆ·ï¼‰
- GET `/order/stats` - é”€å”®ç»Ÿè®¡æ•°æ®
- GET `/user/list` - è·å–ç”¨æˆ·åˆ—è¡¨
- POST `/user/status/{id}` - æ›´æ–°ç”¨æˆ·çŠ¶æ€
- GET `/browse/logs` - è·å–æµè§ˆæ—¥å¿—
- GET `/browse/hot` - è·å–çƒ­é—¨å•†å“

---

## ğŸš€ å¯åŠ¨é¡¹ç›®

```bash
cd emart-admin
npm run dev
```

è®¿é—®ï¼šhttp://localhost:5175

é»˜è®¤è´¦å·ï¼šadmin / admin123

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœæŒ‰ç…§æŒ‡å—å¼€å‘é‡åˆ°é—®é¢˜ï¼Œæˆ–è€…éœ€è¦æˆ‘ç»§ç»­åˆ›å»ºå…·ä½“çš„é¡µé¢ä»£ç ï¼Œè¯·å‘Šè¯‰æˆ‘ï¼

æˆ‘å¯ä»¥å¸®ä½ ï¼š
1. åˆ›å»ºå…·ä½“çš„é¡µé¢ä»£ç ï¼ˆDashboardã€å•†å“ç®¡ç†ç­‰ï¼‰
2. è§£å†³å¼€å‘ä¸­çš„é”™è¯¯
3. è¡¥å……åç«¯API
4. ä¼˜åŒ–åŠŸèƒ½

**ä¸‹ä¸€æ­¥ä½ æƒ³è®©æˆ‘å¸®ä½ åˆ›å»ºå“ªä¸ªé¡µé¢ï¼Ÿ**

- [ ] Dashboardï¼ˆé¦–é¡µç»Ÿè®¡ï¼‰
- [ ] å•†å“ç®¡ç†é¡µé¢
- [ ] è®¢å•ç®¡ç†é¡µé¢
- [ ] å…¶ä»–åŠŸèƒ½

---

**æ–‡æ¡£åˆ›å»ºæ—¶é—´**: 2025-12-28
**é¡¹ç›®çŠ¶æ€**: æ¡†æ¶å·²å®Œæˆï¼Œå¾…ç»§ç»­å¼€å‘
