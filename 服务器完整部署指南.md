# Emart ç”µå•†å¹³å° - æœåŠ¡å™¨å®Œæ•´éƒ¨ç½²æŒ‡å—

## ç›®å½•
1. [æ–¹æ¡ˆé€‰æ‹©](#æ–¹æ¡ˆé€‰æ‹©)
2. [æ–¹æ¡ˆä¸€ï¼šè¡¥å……æ•°æ®åº“ï¼ˆæ¨èï¼‰](#æ–¹æ¡ˆä¸€è¡¥å……æ•°æ®åº“æ¨è)
3. [æ–¹æ¡ˆäºŒï¼šå®Œæ•´é‡æ–°éƒ¨ç½²](#æ–¹æ¡ˆäºŒå®Œæ•´é‡æ–°éƒ¨ç½²)
4. [å‰ç«¯éƒ¨ç½²](#å‰ç«¯éƒ¨ç½²)
5. [éªŒè¯éƒ¨ç½²](#éªŒè¯éƒ¨ç½²)
6. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)

---

## æ–¹æ¡ˆé€‰æ‹©

### æƒ…å†µåˆ†æ

ä½ ä¹‹å‰é‡åˆ°çš„é—®é¢˜æ˜¯ï¼š
- âœ… Dockerå®¹å™¨å·²å¯åŠ¨ï¼ˆMySQLã€Redisã€åç«¯ï¼‰
- âœ… å‰åç«¯é…ç½®å·²è¿æ¥
- âŒ **æ•°æ®åº“ä¸ºç©ºï¼Œæ²¡æœ‰å•†å“æ•°æ®**

### æ¨èæ–¹æ¡ˆ

**å¦‚æœä½ çš„æœåŠ¡å™¨ä¸ŠDockerå®¹å™¨è¿˜åœ¨è¿è¡Œ**ï¼š
- ğŸ‘‰ **æ–¹æ¡ˆä¸€**ï¼šåªéœ€è¦å¯¼å…¥æ•°æ®åº“å³å¯ï¼ˆ10åˆ†é’Ÿå®Œæˆï¼‰

**å¦‚æœä½ æƒ³é‡æ–°å¼€å§‹**æˆ–å®¹å™¨æœ‰é—®é¢˜ï¼š
- ğŸ‘‰ **æ–¹æ¡ˆäºŒ**ï¼šå®Œæ•´é‡æ–°éƒ¨ç½²ï¼ˆ30åˆ†é’Ÿå®Œæˆï¼‰

---

## æ–¹æ¡ˆä¸€ï¼šè¡¥å……æ•°æ®åº“ï¼ˆæ¨èï¼‰

**é€‚ç”¨åœºæ™¯**ï¼šæœåŠ¡å™¨ä¸Šçš„Dockerå®¹å™¨å·²ç»è¿è¡Œï¼Œåªæ˜¯ç¼ºå°‘æ•°æ®

### æ­¥éª¤1ï¼šæ£€æŸ¥æœåŠ¡å™¨å®¹å™¨çŠ¶æ€

```bash
# SSHç™»å½•åˆ°æœåŠ¡å™¨
ssh root@your_server_ip

# æ£€æŸ¥Dockerå®¹å™¨çŠ¶æ€
docker-compose ps

# åº”è¯¥çœ‹åˆ°3ä¸ªå®¹å™¨éƒ½åœ¨è¿è¡Œï¼ˆUpçŠ¶æ€ï¼‰ï¼š
# emart-mysql    Up    0.0.0.0:3306->3306/tcp
# emart-redis    Up    0.0.0.0:6379->6379/tcp
# emart-app      Up    0.0.0.0:8080->8080/tcp
```

### æ­¥éª¤2ï¼šå¯¼å‡ºæœ¬åœ°æ•°æ®åº“

**åœ¨æœ¬åœ°æœºå™¨æ‰§è¡Œ**ï¼ˆWindowsï¼‰ï¼š

```bash
# æ–¹å¼1ï¼šä½¿ç”¨Dockerå¯¼å‡ºï¼ˆå¦‚æœæœ¬åœ°ä¹Ÿç”¨Dockerï¼‰
docker exec emart-mysql mysqld -uroot -pC20041109 emart > emart_backup_with_data.sql

# æ–¹å¼2ï¼šç›´æ¥ä½¿ç”¨mysqldumpï¼ˆå¦‚æœæœ‰æœ¬åœ°MySQLï¼‰
mysqldump -hlocalhost -uroot -pC20041109 emart > emart_backup_with_data.sql

# æ–¹å¼3ï¼šä½¿ç”¨å·²æœ‰çš„å¤‡ä»½æ–‡ä»¶
# ä½ çš„é¡¹ç›®æ ¹ç›®å½•å·²ç»æœ‰ emart_backup.sqlï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨
```

### æ­¥éª¤3ï¼šä¸Šä¼ æ•°æ®åº“æ–‡ä»¶åˆ°æœåŠ¡å™¨

```bash
# åœ¨æœ¬åœ°æœºå™¨æ‰§è¡Œï¼ˆä½¿ç”¨scpï¼‰
scp D:\test\project\emart\emart_backup.sql root@your_server_ip:/opt/emart/

# æˆ–è€…ä½¿ç”¨Gitæ–¹å¼ï¼ˆæ¨èï¼‰
git add emart_backup.sql
git commit -m "Add database backup"
git push origin main

# ç„¶ååœ¨æœåŠ¡å™¨ä¸Šæ‹‰å–
cd /opt/emart
git pull origin main
```

### æ­¥éª¤4ï¼šåœ¨æœåŠ¡å™¨ä¸Šå¯¼å…¥æ•°æ®åº“

```bash
# SSHç™»å½•åˆ°æœåŠ¡å™¨
ssh root@your_server_ip

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/emart

# æ–¹å¼1ï¼šä½¿ç”¨docker execå¯¼å…¥ï¼ˆæ¨èï¼‰
docker exec -i emart-mysql mysql -uroot -pC20041109 emart < emart_backup.sql

# æ–¹å¼2ï¼šè¿›å…¥MySQLå®¹å™¨æ‰‹åŠ¨å¯¼å…¥
docker exec -it emart-mysql mysql -uroot -pC20041109
mysql> use emart;
mysql> source /docker-entrypoint-initdb.d/emart_backup.sql;
mysql> exit;

# ç­‰å¾…å¯¼å…¥å®Œæˆï¼ˆçº¦30ç§’-1åˆ†é’Ÿï¼Œå–å†³äºæ•°æ®å¤§å°ï¼‰
```

### æ­¥éª¤5ï¼šéªŒè¯æ•°æ®å¯¼å…¥æˆåŠŸ

```bash
# è¿›å…¥MySQLå®¹å™¨
docker exec -it emart-mysql mysql -uroot -pC20041109

# æŸ¥çœ‹æ•°æ®åº“
mysql> use emart;
mysql> show tables;

# æŸ¥çœ‹å•†å“æ•°é‡
mysql> SELECT COUNT(*) FROM pms_product;
# åº”è¯¥è¿”å›ï¼š30ï¼ˆæˆ–ä½ çš„å•†å“æ€»æ•°ï¼‰

# æŸ¥çœ‹å•†å“åˆ—è¡¨
mysql> SELECT id, name, price, stock FROM pms_product LIMIT 5;

# é€€å‡º
mysql> exit;
```

### æ­¥éª¤6ï¼šé‡å¯åº”ç”¨ï¼ˆå¯é€‰ï¼‰

å¦‚æœåç«¯åº”ç”¨æœ‰ç¼“å­˜ï¼Œå»ºè®®é‡å¯ï¼š

```bash
# é‡å¯åç«¯å®¹å™¨
docker-compose restart app

# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
docker-compose logs -f app

# çœ‹åˆ° "Started EmartApplication" è¡¨ç¤ºå¯åŠ¨æˆåŠŸ
```

### æ­¥éª¤7ï¼šæµ‹è¯•å‰ç«¯è®¿é—®

```bash
# åœ¨æµè§ˆå™¨è®¿é—®ï¼ˆæ›¿æ¢ä¸ºä½ çš„æœåŠ¡å™¨IPï¼‰
http://your_server_ip:5173   # ç”¨æˆ·ç«¯
http://your_server_ip:5174   # ç®¡ç†ç«¯

# æ£€æŸ¥ï¼š
1. å•†å“åˆ—è¡¨æ˜¯å¦æ˜¾ç¤º
2. å•†å“å›¾ç‰‡æ˜¯å¦æ­£å¸¸
3. èƒ½å¦æ­£å¸¸æµè§ˆå•†å“
```

---

## æ–¹æ¡ˆäºŒï¼šå®Œæ•´é‡æ–°éƒ¨ç½²

**é€‚ç”¨åœºæ™¯**ï¼šæƒ³è¦ä»å¤´å¼€å§‹ï¼Œæˆ–å®¹å™¨æœ‰é—®é¢˜

### å‰æå‡†å¤‡

**æœåŠ¡å™¨è¦æ±‚**ï¼š
- Ubuntu 20.04+ / CentOS 7+
- è‡³å°‘2GB RAMã€20GBç£ç›˜
- å·²å®‰è£…Dockerå’ŒDocker Compose

**æœªå®‰è£…Dockerï¼Ÿå…ˆå®‰è£…**ï¼š

```bash
# å®‰è£…Docker
curl -fsSL https://get.docker.com | sh
sudo systemctl start docker
sudo systemctl enable docker

# å®‰è£…Docker Compose
sudo curl -L "https://github.com/docker/compose/releases/download/v2.20.0/docker-compose-$(uname -s)-$(uname -m)" -o /usr/local/bin/docker-compose
sudo chmod +x /usr/local/bin/docker-compose

# éªŒè¯å®‰è£…
docker --version
docker-compose --version
```

### æ­¥éª¤1ï¼šå…‹éš†ä»£ç åˆ°æœåŠ¡å™¨

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt

# å…‹éš†ä»£ç ï¼ˆæ›¿æ¢ä¸ºä½ çš„ä»“åº“åœ°å€ï¼‰
sudo git clone https://github.com/your-username/emart.git
cd emart

# æŸ¥çœ‹æ–‡ä»¶
ls -l
```

### æ­¥éª¤2ï¼šé…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶ç¯å¢ƒå˜é‡æ¨¡æ¿
sudo cp .env.example .env

# ç¼–è¾‘ç¯å¢ƒå˜é‡
sudo nano .env
```

**ä¿®æ”¹ä»¥ä¸‹é…ç½®ï¼ˆå¿…é¡»ï¼ï¼‰ï¼š**

```env
# åº”ç”¨ç«¯å£
APP_PORT=8080

# MySQLé…ç½®
MYSQL_ROOT_PASSWORD=your_secure_root_password  # æ”¹ä¸ºå¼ºå¯†ç ï¼
MYSQL_PORT=3306
DB_NAME=emart
DB_USER=emart
DB_PASSWORD=your_secure_db_password         # æ”¹ä¸ºå¼ºå¯†ç ï¼

# Redisé…ç½®
REDIS_PORT=6379

# JWTå¯†é’¥ï¼ˆå¿…é¡»ä¿®æ”¹ï¼ï¼‰
JWT_SECRET=your-very-secure-jwt-secret-key-change-this-in-production

# Springé…ç½®
SPRING_PROFILES_ACTIVE=prod
```

ä¿å­˜å¹¶é€€å‡ºï¼š`Ctrl+O` â†’ `Enter` â†’ `Ctrl+X`

### æ­¥éª¤3ï¼šå‡†å¤‡æ•°æ®åº“æ–‡ä»¶

**æ£€æŸ¥æ•°æ®åº“å¤‡ä»½æ–‡ä»¶æ˜¯å¦å­˜åœ¨**ï¼š

```bash
# æŸ¥çœ‹SQLæ–‡ä»¶
ls -lh *.sql

# åº”è¯¥çœ‹åˆ°ï¼š
# emart_backup.sql
```

**å¦‚æœæ²¡æœ‰å¤‡ä»½æ–‡ä»¶**ï¼Œéœ€è¦ä»æœ¬åœ°ä¸Šä¼ ï¼š

```bash
# æ–¹å¼1ï¼šä½¿ç”¨scpä»æœ¬åœ°ä¸Šä¼ 
# åœ¨æœ¬åœ°PowerShellæ‰§è¡Œï¼š
scp D:\test\project\emart\emart_backup.sql root@your_server_ip:/opt/emart/

# æ–¹å¼2ï¼šä½¿ç”¨SFTPå·¥å…·ï¼ˆFileZillaã€WinSCPï¼‰ä¸Šä¼ 
```

**å°†SQLæ–‡ä»¶ç§»åŠ¨åˆ°æ­£ç¡®ä½ç½®**ï¼ˆå¦‚æœéœ€è¦ï¼‰ï¼š

```bash
# ç¡®ä¿SQLæ–‡ä»¶åœ¨é¡¹ç›®æ ¹ç›®å½•
cd /opt/emart
ls emart_backup.sql
```

### æ­¥éª¤4ï¼šå¯åŠ¨æ‰€æœ‰æœåŠ¡

```bash
# æ„å»ºå¹¶å¯åŠ¨ï¼ˆåå°è¿è¡Œï¼‰
sudo docker-compose up -d --build

# æŸ¥çœ‹å¯åŠ¨æ—¥å¿—
sudo docker-compose logs -f

# ç­‰å¾…çœ‹åˆ°ä»¥ä¸‹æ—¥å¿—è¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š
# emart-app    | Started EmartApplication in 15.234 seconds
```

æŒ‰ `Ctrl+C` é€€å‡ºæ—¥å¿—æŸ¥çœ‹ã€‚

### æ­¥éª¤5ï¼šéªŒè¯å®¹å™¨çŠ¶æ€

```bash
# æ£€æŸ¥æ‰€æœ‰å®¹å™¨
sudo docker-compose ps

# åº”è¯¥çœ‹åˆ°ï¼š
# NAME                IMAGE                STATUS         PORTS
# emart-app           emart-api:latest     Up 2 minutes   0.0.0.0:8080->8080/tcp
# emart-mysql         mysql:8.0            Up 2 minutes   0.0.0.0:3306->3306/tcp
# emart-redis         redis:7-alpine       Up 2 minutes   0.0.0.0:6379->6379/tcp
```

### æ­¥éª¤6ï¼šåˆå§‹åŒ–æ•°æ®åº“

**åˆ›å»ºåˆå§‹åŒ–è„šæœ¬ç›®å½•**ï¼ˆå¦‚æœä¸å­˜åœ¨ï¼‰ï¼š

```bash
# åˆ›å»ºdocker/mysql/initç›®å½•
sudo mkdir -p docker/mysql/init

# å¤åˆ¶SQLæ–‡ä»¶åˆ°initç›®å½•
sudo cp emart_backup.sql docker/mysql/init/01-init.sql
```

**é‡æ–°å¯åŠ¨MySQLå®¹å™¨**ï¼ˆä¼šè‡ªåŠ¨æ‰§è¡Œinitç›®å½•ä¸­çš„SQLæ–‡ä»¶ï¼‰ï¼š

```bash
# åœæ­¢MySQLå®¹å™¨
docker-compose stop mysql

# åˆ é™¤MySQLå®¹å™¨ï¼ˆæ•°æ®å·ä¼šä¿ç•™ï¼‰
docker-compose rm -f mysql

# é‡æ–°å¯åŠ¨MySQLï¼ˆä¼šè‡ªåŠ¨å¯¼å…¥initç›®å½•ä¸­çš„SQLï¼‰
docker-compose up -d mysql

# ç­‰å¾…MySQLå¯åŠ¨å®Œæˆ
docker-compose logs -f mysql

# çœ‹åˆ° "MySQL init process done. Ready for start up." è¡¨ç¤ºå¯¼å…¥æˆåŠŸ
```

### æ­¥éª¤7ï¼šéªŒè¯æ•°æ®åº“å¯¼å…¥

```bash
# è¿›å…¥MySQLå®¹å™¨
sudo docker exec -it emart-mysql mysql -uroot -pC20041109 emart

# æŸ¥çœ‹è¡¨
mysql> show tables;

# æŸ¥çœ‹å•†å“æ•°æ®
mysql> SELECT COUNT(*) FROM pms_product;
mysql> SELECT id, name, price FROM pms_product LIMIT 5;

# é€€å‡º
mysql> exit;
```

### æ­¥éª¤8ï¼šé‡å¯åº”ç”¨å®¹å™¨

```bash
# é‡å¯åº”ç”¨å®¹å™¨
sudo docker-compose restart app

# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
sudo docker-compose logs -f app

# çœ‹åˆ°æˆåŠŸå¯åŠ¨åé€€å‡ºï¼ˆCtrl+Cï¼‰
```

---

## å‰ç«¯éƒ¨ç½²

### å‰ç«¯æ„å»ºé…ç½®ä¿®æ”¹

åœ¨**æœ¬åœ°æœºå™¨**ä¿®æ”¹å‰ç«¯é…ç½®ï¼Œä½¿å…¶æŒ‡å‘æœåŠ¡å™¨APIï¼š

**ç”¨æˆ·ç«¯é…ç½®**ï¼š`emart-web/src/utils/request.js`ï¼ˆæˆ–ç±»ä¼¼æ–‡ä»¶ï¼‰

```javascript
// ä¿®æ”¹APIåŸºç¡€URL
const API_BASE_URL = 'http://your_server_ip:8080';  // æ”¹ä¸ºä½ çš„æœåŠ¡å™¨IP

// æˆ–ä½¿ç”¨ç›¸å¯¹è·¯å¾„ï¼ˆå¦‚æœå‰ç«¯å’Œåç«¯åœ¨åŒä¸€æœåŠ¡å™¨ï¼‰
const API_BASE_URL = 'http://localhost:8080';
```

**ç®¡ç†ç«¯é…ç½®**ï¼š`emart-admin/src/utils/request.js`ï¼ˆåŒæ ·ä¿®æ”¹ï¼‰

### æ„å»ºå‰ç«¯

**åœ¨æœ¬åœ°æœºå™¨æ‰§è¡Œ**ï¼š

```bash
# è¿›å…¥å‰ç«¯ç›®å½•
cd D:\test\project\emart\emart-web

# å®‰è£…ä¾èµ–ï¼ˆå¦‚æœè¿˜æ²¡å®‰è£…ï¼‰
npm install

# æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run build

# æ„å»ºå®Œæˆåï¼Œä¼šåœ¨ dist ç›®å½•ç”Ÿæˆé™æ€æ–‡ä»¶
```

### ä¸Šä¼ å‰ç«¯åˆ°æœåŠ¡å™¨

**æ–¹å¼1ï¼šä¸Šä¼ æ„å»ºå¥½çš„distç›®å½•**

```bash
# ä½¿ç”¨scpä¸Šä¼ ç”¨æˆ·ç«¯
scp -r D:\test\project\emart\emart-web\dist root@your_server_ip:/var/www/emart-web/

# ä¸Šä¼ ç®¡ç†ç«¯
scp -r D:\test\project\emart\emart-admin\dist root@your_server_ip:/var/www/emart-admin/
```

**æ–¹å¼2ï¼šä½¿ç”¨Nginxåå‘ä»£ç†ï¼ˆæ¨èï¼‰**

åœ¨æœåŠ¡å™¨ä¸Šå®‰è£…Nginxï¼š

```bash
# å®‰è£…Nginx
sudo apt-get update
sudo apt-get install -y nginx

# åˆ›å»ºNginxé…ç½®
sudo nano /etc/nginx/sites-available/emart
```

**Nginxé…ç½®å†…å®¹**ï¼š

```nginx
# ç”¨æˆ·ç«¯é…ç½®
server {
    listen 80;
    server_name your-domain.com;  # æ”¹ä¸ºä½ çš„åŸŸåæˆ–æœåŠ¡å™¨IP

    # å‰ç«¯é™æ€æ–‡ä»¶
    location / {
        root /var/www/emart-web;  # å‰ç«¯distç›®å½•
        try_files $uri $uri/ /index.html;
    }

    # APIåå‘ä»£ç†åˆ°åç«¯
    location /api/ {
        proxy_pass http://localhost:8080/;
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }

    # æ–‡ä»¶ä¸Šä¼ è·¯å¾„
    location /uploads/ {
        alias /opt/emart/uploads/;
    }

    # å›¾ç‰‡è·¯å¾„
    location /images/ {
        alias /opt/emart/images/;
    }
}
```

å¯ç”¨é…ç½®ï¼š

```bash
# åˆ›å»ºè½¯é“¾æ¥
sudo ln -s /etc/nginx/sites-available/emart /etc/nginx/sites-enabled/

# æµ‹è¯•é…ç½®
sudo nginx -t

# é‡å¯Nginx
sudo systemctl restart nginx
```

### é…ç½®é˜²ç«å¢™

```bash
# å…è®¸HTTPå’ŒHTTPS
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw allow 22/tcp

# å¯ç”¨é˜²ç«å¢™
sudo ufw enable

# æŸ¥çœ‹çŠ¶æ€
sudo ufw status
```

---

## éªŒè¯éƒ¨ç½²

### 1. æ£€æŸ¥åç«¯API

```bash
# åœ¨æœåŠ¡å™¨ä¸Šæµ‹è¯•
curl http://localhost:8080/swagger-ui.html

# æˆ–åœ¨æµè§ˆå™¨è®¿é—®ï¼ˆæ›¿æ¢ä¸ºä½ çš„æœåŠ¡å™¨IPï¼‰
http://your_server_ip:8080/swagger-ui.html
```

åº”è¯¥çœ‹åˆ°Swagger APIæ–‡æ¡£é¡µé¢ã€‚

### 2. æ£€æŸ¥æ•°æ®åº“

```bash
# è¿›å…¥MySQLå®¹å™¨
docker exec -it emart-mysql mysql -uroot -pC20041109 emart

# æŸ¥çœ‹å•†å“æ•°é‡
mysql> SELECT COUNT(*) FROM pms_product;
mysql> SELECT name, price FROM pms_product LIMIT 3;

# é€€å‡º
mysql> exit;
```

### 3. æ£€æŸ¥å‰ç«¯

åœ¨æµè§ˆå™¨è®¿é—®ï¼š

```
http://your_server_ip                    # ç”¨æˆ·ç«¯ï¼ˆå¦‚æœé…ç½®äº†Nginxï¼‰
http://your_server_ip:8080/swagger-ui.html  # APIæ–‡æ¡£
```

**æµ‹è¯•æµç¨‹**ï¼š
1. âœ… é¦–é¡µæ˜¾ç¤ºå•†å“åˆ—è¡¨ï¼ˆæœ‰å›¾ç‰‡ã€ä»·æ ¼ï¼‰
2. âœ… ç‚¹å‡»å•†å“å¯ä»¥æŸ¥çœ‹è¯¦æƒ…
3. âœ… å¯ä»¥æ³¨å†Œæ–°ç”¨æˆ·
4. âœ… å¯ä»¥ç™»å½•
5. âœ… å¯ä»¥åŠ å…¥è´­ç‰©è½¦
6. âœ… å¯ä»¥ä¸‹å•

---

## å¸¸è§é—®é¢˜

### é—®é¢˜1ï¼šå‰ç«¯è®¿é—®åç«¯è·¨åŸŸé”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Access to XMLHttpRequest has been blocked by CORS policy
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

**æ–¹æ¡ˆAï¼šé…ç½®Nginxåå‘ä»£ç†**ï¼ˆæ¨èï¼‰

å·²åœ¨"å‰ç«¯éƒ¨ç½²"éƒ¨åˆ†è¯´æ˜ã€‚

**æ–¹æ¡ˆBï¼šåç«¯å…è®¸è·¨åŸŸ**

æ£€æŸ¥åç«¯CORSé…ç½®ï¼š`src/main/java/com/emart/config/CorsConfig.java`

```java
@Configuration
public class CorsConfig implements WebMvcConfigurer {
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/**")
                .allowedOriginPatterns("*")
                .allowedMethods("GET", "POST", "PUT", "DELETE", "OPTIONS")
                .allowedHeaders("*")
                .allowCredentials(true)
                .maxAge(3600);
    }
}
```

### é—®é¢˜2ï¼šæ•°æ®åº“å¯¼å…¥å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```
ERROR 1045 (28000): Access denied for user 'root'@'localhost'
```

**è§£å†³æ–¹æ¡ˆ**ï¼š

æ£€æŸ¥å¯†ç æ˜¯å¦æ­£ç¡®ï¼š

```bash
# æŸ¥çœ‹.envæ–‡ä»¶ä¸­çš„MySQLå¯†ç 
cat .env | grep MYSQL_ROOT_PASSWORD

# ä½¿ç”¨æ­£ç¡®çš„å¯†ç å¯¼å…¥
docker exec -i emart-mysql mysql -uroot -pæ­£ç¡®å¯†ç  emart < emart_backup.sql
```

### é—®é¢˜3ï¼šå‰ç«¯é¡µé¢ç©ºç™½ï¼Œæ²¡æœ‰æ•°æ®

**å¯èƒ½åŸå› **ï¼š
1. æ•°æ®åº“æ²¡æœ‰æ•°æ®
2. APIåœ°å€é…ç½®é”™è¯¯
3. è·¨åŸŸé—®é¢˜

**æ’æŸ¥æ­¥éª¤**ï¼š

1. **æ£€æŸ¥æ•°æ®åº“**ï¼š
   ```bash
   docker exec -it emart-mysql mysql -uroot -på¯†ç  emart
   mysql> SELECT COUNT(*) FROM pms_product;
   ```

2. **æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°**ï¼ˆF12ï¼‰ï¼š
   - æŸ¥çœ‹Networkæ ‡ç­¾é¡µ
   - æ£€æŸ¥APIè¯·æ±‚æ˜¯å¦æˆåŠŸï¼ˆçŠ¶æ€ç 200ï¼‰
   - æŸ¥çœ‹è¿”å›çš„æ•°æ®

3. **æ£€æŸ¥APIåœ°å€**ï¼š
   - æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
   - Consoleè¾“å…¥ï¼š`window.location.origin`
   - ç¡®è®¤APIåœ°å€æ­£ç¡®

### é—®é¢˜4ï¼šå®¹å™¨æ— æ³•å¯åŠ¨

**æŸ¥çœ‹å®¹å™¨æ—¥å¿—**ï¼š

```bash
# æŸ¥çœ‹ç‰¹å®šå®¹å™¨æ—¥å¿—
docker-compose logs app
docker-compose logs mysql
docker-compose logs redis
```

**å¸¸è§åŸå› **ï¼š
- ç«¯å£è¢«å ç”¨ï¼šä¿®æ”¹ `.env` ä¸­çš„ç«¯å£é…ç½®
- å†…å­˜ä¸è¶³ï¼šæ£€æŸ¥æœåŠ¡å™¨å†…å­˜ä½¿ç”¨æƒ…å†µ
- é…ç½®é”™è¯¯ï¼šæ£€æŸ¥é…ç½®æ–‡ä»¶æ ¼å¼

### é—®é¢˜5ï¼šå›¾ç‰‡æ— æ³•æ˜¾ç¤º

**æ£€æŸ¥å›¾ç‰‡è·¯å¾„**ï¼š

1. ç¡®è®¤uploadså’Œimagesç›®å½•å­˜åœ¨ï¼š
   ```bash
   ls -l /opt/emart/uploads/
   ls -l /opt/emart/images/
   ```

2. å¦‚æœä¸å­˜åœ¨ï¼Œåˆ›å»ºç›®å½•ï¼š
   ```bash
   sudo mkdir -p /opt/emart/uploads
   sudo mkdir -p /opt/emart/images
   sudo chmod -R 755 /opt/emart/uploads
   sudo chmod -R 755 /opt/emart/images
   ```

3. æ£€æŸ¥Nginxé…ç½®æ˜¯å¦åŒ…å«/uploads/å’Œ/images/çš„locationå—

### é—®é¢˜6ï¼šæ”¯ä»˜åŠŸèƒ½æ— æ³•ä½¿ç”¨

æ”¯ä»˜å®æ²™ç®±é…ç½®åœ¨ `application-dev.yml`ï¼Œç”Ÿäº§ç¯å¢ƒéœ€è¦ï¼š
1. æ³¨å†Œæ”¯ä»˜å®å¼€æ”¾å¹³å°è´¦å·
2. åˆ›å»ºåº”ç”¨å¹¶è·å–AppId
3. é…ç½®å¯†é’¥
4. ä¿®æ”¹é…ç½®æ–‡ä»¶ä¸­çš„å¯†é’¥ä¿¡æ¯

**æš‚æ—¶è·³è¿‡æ”¯ä»˜åŠŸèƒ½**ï¼šç›´æ¥åœ¨æ•°æ®åº“ä¿®æ”¹è®¢å•çŠ¶æ€ä¸º"å·²æ”¯ä»˜"ã€‚

---

## ç»´æŠ¤ä¸æ›´æ–°

### æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹æ‰€æœ‰æ—¥å¿—
docker-compose logs -f

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡æ—¥å¿—
docker-compose logs -f app    # åç«¯
docker-compose logs -f mysql  # æ•°æ®åº“
docker-compose logs -f redis   # Redis
```

### æ•°æ®å¤‡ä»½

```bash
# å¤‡ä»½æ•°æ®åº“
sudo docker-compose exec mysql mysqldump -uroot -på¯†ç  emart > backup_$(date +%Y%m%d).sql

# æ¢å¤æ•°æ®åº“
sudo docker-compose exec -T mysql mysql -uroot -på¯†ç  emart < backup_20250101.sql
```

### æ›´æ–°ä»£ç 

```bash
# æ‹‰å–æœ€æ–°ä»£ç 
git pull origin main

# é‡æ–°æ„å»ºå¹¶å¯åŠ¨
sudo docker-compose up -d --build

# æŸ¥çœ‹æ—¥å¿—
sudo docker-compose logs -f
```

### é‡å¯æœåŠ¡

```bash
# é‡å¯æ‰€æœ‰æœåŠ¡
sudo docker-compose restart

# é‡å¯ç‰¹å®šæœåŠ¡
sudo docker-compose restart app
sudo docker-compose restart mysql
```

### åœæ­¢æœåŠ¡

```bash
# åœæ­¢æ‰€æœ‰æœåŠ¡
sudo docker-compose down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®å·ï¼ˆæ…ç”¨ï¼ä¼šæ¸…ç©ºæ•°æ®ï¼‰
sudo docker-compose down -v
```

---

## æ€»ç»“

### æ¨èéƒ¨ç½²æµç¨‹ï¼ˆç¬¬ä¸€æ¬¡éƒ¨ç½²ï¼‰

1. âœ… **æ–¹æ¡ˆäºŒ**ï¼šå®Œæ•´é‡æ–°éƒ¨ç½²ï¼ˆ30åˆ†é’Ÿï¼‰
2. âœ… æŒ‰ç…§æ­¥éª¤1-8æ“ä½œ
3. âœ… éªŒè¯éƒ¨ç½²æˆåŠŸ

### åç»­æ›´æ–°æµç¨‹

1. âœ… **æ–¹æ¡ˆä¸€**ï¼šè¡¥å……æ•°æ®åº“
2. âœ… åªéœ€è¦å¯¼å…¥æ–°çš„æ•°æ®
3. âœ… é‡å¯åº”ç”¨å®¹å™¨

### éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœåœ¨éƒ¨ç½²è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹æ—¥å¿—ï¼š`docker-compose logs -f`
2. æ£€æŸ¥å®¹å™¨çŠ¶æ€ï¼š`docker-compose ps`
3. æŸ¥çœ‹æœ¬æ–‡æ¡£çš„"å¸¸è§é—®é¢˜"éƒ¨åˆ†
4. æäº¤Issueåˆ°GitHub

**ç¥ä½ éƒ¨ç½²é¡ºåˆ©ï¼** ğŸ‰
